// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:dev.db"
}

model User {
  UID   String   @id @default(uuid())
  Name  String
  Email String   @unique
  Phone String?
  Type  UserType
}

enum UserType {
  PARENT
  PATIENT
  ADMIN
  THERAPIST
}

model Patient {
  UID            String         @id @default(uuid())
  DOB            DateTime
  Gender         Gender
  Address        String
  Sponsor        Sponsor?       @relation(fields: [SponsorID], references: [SID])
  SponsorID      String?
  Appointments   Appointment[]
  MedicalRecords MedicalRecord?

  ProgressReport ProgressReport[]
}

enum Gender {
  MALE
  FEMALE
  OTHER
}

model Appointment {
  AID       String    @id @default(uuid())
  Type      String
  Time      DateTime
  Comment   String
  PID       String
  Patient   Patient   @relation(fields: [PID], references: [UID])
  TID       String
  Therapist Therapist @relation(fields: [TID], references: [TID])
}

model MedicalRecord {
  PID     String  @id
  Data    String
  Patient Patient @relation(fields: [PID], references: [UID])
}

model Therapist {
  TID            String        @id @default(uuid())
  Specialization String //Can make this an enum if needed
  Appointments   Appointment[]
}

model Sponsor {
  SID      String    @id @default(uuid())
  Name     String
  Contact  String
  Patients Patient[]
}

model ProgressReport {
  RID         String   @id @default(uuid())
  PID         String
  Responses   Json //Expected format: {question: string, answer: string}[]
  DateCreated DateTime @default(now())
  Patient     Patient  @relation(fields: [PID], references: [UID])
}

model ContactForm {
  FID            String  @id @default(uuid())
  Identification String
  Diagnosed      String
  BeenHereBefore Boolean
  Comments       String?
}
